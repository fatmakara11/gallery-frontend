<div class="employee-container">
  <app-employee-filter (filterChanged)="onFilterChanged($event)"></app-employee-filter>
  <div *ngFor="let emp of employees" class="card"
       [ngClass]="{
    'card-active': emp.employmentStatus === 'ACTIVE',
    'card-resigned': emp.employmentStatus === 'RESIGNED',
    'card-onleave': emp.employmentStatus === 'ON_LEAVE'
  }"
      >
    <!-- Çalışan Kartı - Normal Görünüm -->
    <div *ngIf="editableId !== emp.id" class="employee-card">

      <div class="card-info">
        <h3>{{ emp.firstName }} {{ emp.lastName }}</h3>
        <p><strong>Department:</strong> {{ emp.department.name }}</p>
        <p><strong>Team:</strong> {{ emp.team.name }}</p>
        <p><strong>Hire Date:</strong> {{ emp.hireDate }}</p>
        <p><strong>Birth Date:</strong> {{ emp.birthDate }}</p>
        <p><strong>City:</strong> {{ emp.city }}</p>
        <p><strong>Email:</strong> {{ emp.email }}</p>
        <p><strong>Phone:</strong> {{ emp.phone }}</p>

        <p><strong>Gender:</strong> {{ emp.gender }}</p>
        <p><strong>Position:</strong> {{ emp.position }}</p>
        <p><strong>Contract Type:</strong> {{ emp.contractType }}</p>
        <p><strong>Employment Status:</strong> {{ emp.employmentStatus }}</p>



        <div class="button-group">
          <button (click)="deleteEmployee(emp.id!)" class="btn btn-danger">Delete</button>
          <button (click)="setEditable(emp)" class="btn btn-primary">Update</button>
        </div>
      </div>
    </div>
    <!-- Düzenleme Modu -->
    <!-- Düzenleme Modu -->
    <div *ngIf="editableId === emp.id" class="card-edit">
      <input type="text" [(ngModel)]="newEmployee.firstName" placeholder="First Name">
      <input type="text" [(ngModel)]="newEmployee.lastName" placeholder="Last Name">
      <input type="date" [(ngModel)]="newEmployee.hireDate">
      <input type="date" [(ngModel)]="newEmployee.birthDate">

      <input type="email" [(ngModel)]="newEmployee.email" placeholder="Email">
      <input type="text" [(ngModel)]="newEmployee.phone" placeholder="Phone">
      <input type="text" [(ngModel)]="newEmployee.city" placeholder="City">

      <select [(ngModel)]="newEmployee.gender" name="gender">
        <option *ngFor="let g of genders" [value]="g">{{ g }}</option>
      </select>

      <select [(ngModel)]="newEmployee.gender" name="gender">
        <option *ngFor="let g of genders" [value]="g">{{ g }}</option>
      </select>

      <select [(ngModel)]="newEmployee.employmentStatus" name="employmentStatus">
        <option *ngFor="let e of employmentStatuses" [value]="e">{{ e }}</option>
      </select>

      <select [(ngModel)]="newEmployee.contractType" name="contractType">
        <option *ngFor="let c of contractTypes" [value]="c">{{ c }}</option>
      </select>



      <select [(ngModel)]="newEmployee.department.id">
        <option *ngFor="let dept of departments" [value]="dept.id">{{ dept.name }}</option>
      </select>

      <select [(ngModel)]="newEmployee.team.id">
        <option *ngFor="let team of teams" [value]="team.id">{{ team.name }}</option>
      </select>

      <button (click)="saveUpdate()">Kaydet</button>
      <button (click)="cancelEdit()">Vazgeç</button>
    </div>
  </div>
  <!-- Yeni Employee Ekle -->
  <div class="card new-employee">
    <h3>New Employee Add</h3>
    <div class="form-row">
      <div class="form-group">
       <label>First Name:</label>
       <input type="text" [(ngModel)]="newEmployee.firstName" placeholder="First Name">
      </div>
      <div class="form-group">
       <label>Last Name:</label>
       <input type="text" [(ngModel)]="newEmployee.lastName" placeholder="Last Name">
     </div>
    </div>


    <div class="form-row">
    <div class="form-group">
      <label>Hire Date:</label>
      <input type="date" [(ngModel)]="newEmployee.hireDate">
    </div>
    <div class="form-group">
      <label>Birth Date:</label>
      <input type="date" [(ngModel)]="newEmployee.birthDate">
    </div>
    </div>

    <div class="form-row">
    <div class="form-group">
      <label>Email:</label>
      <input type="email" [(ngModel)]="newEmployee.email" placeholder="Email">
    </div>
    <div class="form-group">
      <label>Phone:</label>
      <input type="text" [(ngModel)]="newEmployee.phone" placeholder="Phone">
    </div>
    </div>

    <div class="form-row">
    <div class="form-group">
      <label>Gender:</label>
      <!-- Gender dropdown -->
      <select [(ngModel)]="newEmployee.gender" name="gender">
        <option *ngFor="let g of genders" [value]="g">{{ g }}</option>
      </select>
    </div>
    <div class="form-group">
      <label>Position:</label>
      <select [(ngModel)]="newEmployee.position" name="position">
        <option *ngFor="let p of positions" [value]="p">{{ p }}</option>
      </select>
    </div>
    </div>

    <div class="form-row">
    <div class="form-group">
      <label>Contract Type:</label>
      <!-- Contract Type dropdown -->
      <select [(ngModel)]="newEmployee.contractType" name="contractType">
        <option *ngFor="let c of contractTypes" [value]="c">{{ c }}</option>
      </select>
    </div>
    <div class="form-group">
      <label>Status:</label>
      <!-- Employment Status dropdown -->
      <select [(ngModel)]="newEmployee.employmentStatus" name="employmentStatus">
        <option *ngFor="let e of employmentStatuses" [value]="e">{{ e }}</option>
      </select>
    </div>
    </div>

    <div class="form-group">
      <label>City:</label>
      <input type="text" [(ngModel)]="newEmployee.city" placeholder="City">
    </div>


    <div class="form-row">
    <div class="form-group">
      <label>Department:</label>
      <select [(ngModel)]="newEmployee.department.id">
        <option *ngFor="let dept of departments" [value]="dept.id">{{ dept.name }}</option>
      </select>
    </div>
    <div class="form-group">
      <label>Team:</label>
      <select [(ngModel)]="newEmployee.team.id">
        <option *ngFor="let team of teams" [value]="team.id">{{ team.name }}</option>
      </select>
    </div>
    </div>
    <button (click)="createEmployee()">Kaydet</button>
  </div>
</div>
